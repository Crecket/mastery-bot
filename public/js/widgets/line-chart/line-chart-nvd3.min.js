"use strict";function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,a){for(var e=0;e<a.length;e++){var i=a[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,e,i){return e&&t(a.prototype,e),i&&t(a,i),a}}();!function(){var t=function(){function t(a,e,i,n,s){_classCallCheck(this,t),this.columns=a,this.color=e,this.margin=i,this.data=n,this.nv=s,this.maxX=130,this.drawStep=6,this.durationResizeAnimation=500}return _createClass(t,[{key:"_addSvgContainer",value:function(){this.svg=d3.select(".line-chart__container").append("div").append("svg")}},{key:"_getSvgSizes",value:function(){var t=getComputedStyle(this.svg[0][0]).width,a=getComputedStyle(this.svg[0][0]).height;this.svgWidth=t.slice(0,t.length-2),this.svgHeight=a.slice(0,a.length-2)-this.margin}},{key:"_addAxisLabels",value:function(){d3.selectAll(".line-chart__container svg .y-axis-label").remove(),d3.select(".line-chart__container svg").append("text").attr("class","y-axis-label").attr("x","-72").attr("y","12").attr("transform","rotate(-90)").text("REVENUE"),d3.select(".line-chart__container svg").append("text").attr("class","x-axis-label").text("TIME")}},{key:"_buildBackground",value:function(){this._addSvgContainer(),this._getSvgSizes();for(var t=[],a=0;a<this.columns;a++)t.push(this.svgHeight);this.barsLayout=this.svg.append("g").attr("class","bars").attr("transform","translate("+this.margin+", 0)").selectAll("rect").data(t).enter().append("rect"),this._addAxisLabels(),this._setBackgroundSizes()}},{key:"_setBackgroundSizes",value:function(){var t=(this.svgWidth-2*this.margin)/this.columns,a=t/2;this.barsLayout.attr("fill",this.color).attr("y",this.margin).attr("height",function(t,a){return t}).transition().duration(this.durationResizeAnimation).attr("width",a).attr("x",function(a,e){return e*t}),d3.select(".line-chart__container svg .x-axis-label").transition().duration(this.durationResizeAnimation).attr("x",this.svgWidth-this.margin-30).attr("y",this.svgHeight-this.svgHeight/4+this.margin+14)}},{key:"drawChart",value:function(){this._buildBackground(),this._buildLegend(),this._buildNvGraph(),this._animateGraphs()}},{key:"_buildNvGraph",value:function(){var t=this;this._tuneNvGraph(),nv.addGraph(function(){return t.svg.datum(t.data).transition().duration(0).call(t.lineChart),nv.utils.windowResize(t.resizeBackground.bind(t)),nv.utils.windowResize(t.lineChart.update),t.lineChart})}},{key:"_tuneNvGraph",value:function(){this.lineChart=nv.models.lineChart().margin({top:this.margin,right:this.margin,bottom:0,left:this.margin}).useInteractiveGuideline(!0).xDomain([0,13.6]).yDomain([-1.01,3]).showLegend(!1).showYAxis(!0).showXAxis(!0).pointSize(5),this.lineChart.tooltip.enabled(!1),this.lineChart.interactiveLayer.tooltip.enabled(!1),this.lineChart.xAxis.showMaxMin(!1).tickValues([0]).tickFormat(d3.format("c")),this.lineChart.yAxis.showMaxMin(!1).ticks(10).tickFormat(d3.format("c"))}},{key:"_buildLegend",value:function(){var t=d3.select(".line-chart__container").append("div").attr("class","legend").selectAll(".legend__item").data(this.data).enter().append("div").attr("class","legend__item");t.append("div").attr("class","legend__mark pull-left").style("background-color",function(t){return t.color}),t.append("div").attr("class","legend__text").text(function(t){return t.key})}},{key:"resizeBackground",value:function(){this._getSvgSizes(),this._setBackgroundSizes()}},{key:"_animateGraphs",value:function(){var t=this,a=1;this.timer=setInterval(function(){t._calcAllGraphs(a),t._drawNextStep(a),a++,t._checkEndOfAnimation(a)},15)}},{key:"_drawNextStep",value:function(t){(t%this.drawStep==0||t==this.maxX)&&this.lineChart.update()}},{key:"_checkEndOfAnimation",value:function(t){t==this.maxX+1&&(this.lineChart.duration(this.durationResizeAnimation),this.data[1].fillOpacity=.11,this.lineChart.update(),clearInterval(this.timer))}},{key:"_calcAllGraphs",value:function(t){this._calcFirstGraph(t),this._calcSecondGraph(t),this._calcThirdGraph(t)}},{key:"_calcFirstGraph",value:function(t){var a=28,e=71,i=110,n=this.data[0].values;a>t?n.push({x:t/10,y:(.0343*t*t-.67*t)/14}):e>t?n.push({x:t/10,y:-(t-71)*(t-71)/1026+2.378}):i>t?n.push({x:t/10,y:-4/(t-43)+2.53}):n.push({x:t/10,y:(t-114)*(t-114)*(t-114)/13e3+2.476})}},{key:"_calcSecondGraph",value:function(t){var a=30,e=82,i=this.data[1].values;a>t?i.push({x:t/10,y:(.03255*t*t-.96*t)/16}):e>t?i.push({x:t/10,y:(-.01055*(t-80.3)*(t-80.3)+27)/15}):i.push({x:t/10,y:(t/2-45)*(t/2-45)*(t/2-45)/15e3+1.805})}},{key:"_calcThirdGraph",value:function(t){var a=31,e=103,i=this.data[2].values;a>t?i.push({x:t/10,y:(.02255*t*t-.91*t)/13}):e>t?i.push({x:t/10,y:.82*Math.sin((t-45)/21)}):i.push({x:t/10,y:-(t-130)*(t-130)*(t-130)/64e3})}}]),t}(),a=[{values:[{x:0,y:0}],key:"Awesome",color:"rgb(80, 150, 215)"},{values:[{x:0,y:0}],key:"Good",color:"rgb(0, 188, 212)",fillOpacity:1e-5,area:!0},{values:[{x:0,y:0}],key:"Fail",color:"rgb(255, 82, 82)"}],e=new t(7,"#4a4a4a",20,a,nv);e.drawChart()}();